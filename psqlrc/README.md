# Удобное цветное приглашение командной строки в `psql` (Convenient colored command line prompt in `psql`)

## Пример снимка экрана основного PostgreSQL

![psqlrc primary](psqlrc.primary.png)

## Пример снимка экрана резервного PostgreSQL

![psqlrc standby](psqlrc.standby.png)

## Что отображается

1. дата и время с часовой зоной
1. версия мажорная и минорная
1. роль сервера: основной мастер `primary` или резервный реплика `standby`
   1. для `primary` внутри круглых скобок: количество реплик в статусе `streaming`
   1. для `standby` внутри круглых скобок: длительность отставания, название или IP primary сервера
1. пользователь
1. хост
1. порт
1. база данных

## Валидация при запуске

1. Отображаются ошибки в конфигурационном файле `postgresql.conf`, если такие имеются. Выводится название конфигурационного файла и номер строки, название параметра, текст ошибки.
1. Отображаются ошибки в конфигурационном файле `pg_hba.conf`, если такие имеются. Выводится название конфигурационного файла и номера строки, название параметра, текст ошибки.
1. При необходимости перезагрузить СУБД отображается предупреждение. Выводится название конфигурационного файла и номер строки, название параметра, его текущее и будущее значение.
1. При необходимости перечитать конфигурацию СУБД отображается предупреждение. Выводится название конфигурационного файла и номер строки, название параметра, его текущее и будущее значение.

## Поддержка внешнего ПО

Используется пейджер [`pspg`](https://github.com/okbob/pspg), если он установлен. Иначе используется [`less`](https://en.wikipedia.org/wiki/Less_(Unix)).

## Как установить

* Документация: https://postgrespro.ru/docs/postgresql/16/app-psql#APP-PSQL-FILES-PSQLRC
* Файл с конфигурацией: [`psqlrc`](psqlrc)

Протестировано в `psql 12+`.

## Ссылки по теме

* [Удобное цветное приглашение командной строки в `bash`](../bashrc)
